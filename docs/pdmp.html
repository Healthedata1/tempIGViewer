<!-- template for the static html pages not generated by build e.g., index, guidance , toc -->

<!DOCTYPE HTML>

<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
   <meta charset="UTF-8"/>
  <title>US Meds</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="US Meds Implemenation Guide" />
<meta name="author" content="HL7 Pharmacy Work Group"/>
  <link href="fhir.css" rel="stylesheet"/>


   <!-- Bootstrap core CSS -->

   <!-- Latest compiled and minified CSS -->

  <link href="assets/css/bootstrap.css" rel="stylesheet"/>
  <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>
  <link href="assets/css/bootstrap-glyphicons.css" rel="stylesheet"/>

  <!-- Project extras -->
  <link href="assets/css/project.css" rel="stylesheet"/>
  <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
	<link href="assets/css/jquery-ui.css" rel="stylesheet"/>




  <!-- Favicons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png"/>
  <link rel="shortcut icon" href="assets/ico/favicon.png"/>


<body markdown="1">
<?xml version="1.0" encoding="UTF-8"?>
<div id="segment-header" class="segment">
  <!-- segment-header -->
  <div class="container"><!-- container -->

<!-- hl7 logo -->
    <a no-external="true" href="http://hl7.org/fhir">
      <img alt="FHIR Homepage" class="img-responsive logo" src="assets/images/fhir-logo-www.png"/>
    </a>
<!-- end hl7 logo -->


 <!-- org logo -->
             <!--
<a id="your-logo" no-external="true" href="http://www.hl7.org">
<img height="50" alt="visit the hl7 website" width="42" src="assets/images/hl7-logo.png"/>
</a>

your logo here

[![visit our website](assets/images/org_logo.png)](your web site.html)
{: .img-responsive # org_logo}

can only resize using html  or css ;-(

-->


<a no-external="true" href="http://www.openmhealth.org/">
<img alt="visit our website" class="img-responsive project-logo" src="assets/images/org_logo.png"/>
</a>

  <!-- end org logo -->


      <div id="project-status" class="project-status"> <!-- ig title text -->
        <b>US Meds Implementation Guide</b>
        
        (Release 1.1.0 )
        
    </div><!-- end ig title text -->

  </div><!-- end container -->
  <div class="container">
    <!-- container -->
  </div>
</div>
<!-- /segment-header -->


<div id="segment-navbar" class="segment">
  <!-- segment-navbar -->
  <div id="stripe">
  </div>
  <div class="container">
    <!-- container -->
    <!-- HEADER CONTENT -->
    <nav class="navbar navbar-inverse">
      <div class="container">
        <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
          <span class="icon-bar">
          </span>
          <span class="icon-bar">
          </span>
          <span class="icon-bar">
          </span>
        </button>
        <a class="navbar-brand hidden" href="http://hl7.org/fhir/STU3/index.html">FHIR</a>
        <div class="nav-collapse collapse navbar-inverse-collapse">

       <ul class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li>
    <a href="guidance.html">General Guidance</a>
  </li>
  <li>
    <a href="profiles.html">Profiles</a>
  </li>
  <li>
    <a href="pdmp.html">PDMP</a>
  </li>
  <li class="dropdown">
    <a href="#" data-toggle="dropdown" class="dropdown-toggle">Capability Statements<b class="caret">
    </b>
  </a>
  <ul class="dropdown-menu">
    <li>
      <a href="CapabilityStatement-server.html">Conformance requirements for Server</a>
    </li>
    <li>
      <a href="CapabilityStatement-client.html">Conformance requirements for Client</a>
    </li>
  </ul>
</li>
<li>
  <a href="downloads.html">Downloads</a>
</li>
<li>
  <a href="http://hl7.org/fhir/us/meds/history.html">History</a>
</li>
</ul>


             <!--        <ul class="nav navbar-nav">
          <li>
            <a href="index.html">Home</a>
          </li>
          <li>
            <a href="guidance.html">General Guidance</a>
          </li>
          <li>
            <a href="profiles.html">Profiles and Logical Models</a>
          </li>
          <li>
            <a href="structuremaps.html">Mappings</a>
          </li>
          <li>
            <a href="extensions.html">Extensions</a>
          </li>
          <li>
            <a href="terminology.html">Terminology</a>
          </li>
          <li>
            <a href="searchparams.html">Search Parameters</a>
          </li>
          <li>
            <a href="capstatements.html">Capability Statements</a>
          </li>
          <li>
            <a href="security.html">Security</a>
          </li>
          <li>
            <a href="examples.html">Examples</a>
          </li>
          <li>
            <a href="downloads.html">Downloads</a>
          </li>
        </ul> -->
      </div>
      <!-- /.nav-collapse -->
    </div>
    <!-- /.container -->
  </nav>
  <!-- /.navbar -->
  <!-- /HEADER CONTENT -->
</div>
<!-- /container -->
</div>
<!-- /segment-navbar -->


</div>  <!-- /container -->
</div>  <!-- /segment-breadcrumb -->


<div id="page-content-wrapper">  <!-- page content wrapper -->
  <div class="page-content">  <!--page content -->
    <div class="container">  <!-- container -->
      <div class="row">  <!-- row -->
       <div class="inner-wrapper"> <!-- inner-wrapper -->
         <div class="col-12">  <!--col -->
            <!-- content of page -->








  <style type="text/css">
  h2,h3,h4,h5,h6{--pagenumber: "4"}
  </style>



<!-- ============BreadCrumb=============== -->

<nav class="breadcrumb">
  
    <a class="breadcrumb-item btn btn-link btn-sm" href="toc.html">TOC</a> <li><a href='index.html'><b>Home</b></a></li><li><b>PDMP</b></li>
</nav>


<!-- ============StatusBox=============== -->

<!--status-bar-->
<p id="publish-box">
This is the 
     STU2 (release 1.1.0)
  
  
  of the US Meds Implementation Guide,  based on <a href="http://hl7.org/fhir/STU3/index.html">FHIR Version 3.0.1</a>.  See the <a href="http://www.hl7.org/fhir/us/meds/history.cfml">Directory of published versions</a>
</p>


<!-- ============CONTENT CONTENT=============== -->


<h2>US Meds Prescription Drug Monitoring Program (PDMP) FHIR Implementation Guide</h2>

<!-- page source: pdmp.md  -->



<!-- TOC  the css styling for this is \pages\assets\css\project.css under 'markdown-toc'-->

<ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#scope" id="markdown-toc-scope">Scope</a></li>
  <li><a href="#abstract-model-actors-and-definitions" id="markdown-toc-abstract-model-actors-and-definitions">Abstract Model, Actors and Definitions</a></li>
  <li><a href="#pdmp-data-access-using-fhir" id="markdown-toc-pdmp-data-access-using-fhir">PDMP Data Access using FHIR</a>    <ul>
      <li><a href="#using-fhir-search-apis" id="markdown-toc-using-fhir-search-apis">Using FHIR Search APIs</a></li>
      <li><a href="#using-fhir-messaging-apis" id="markdown-toc-using-fhir-messaging-apis">Using FHIR Messaging APIs</a></li>
      <li><a href="#final-approach-for-us-meds-pdmp-fhir-ig" id="markdown-toc-final-approach-for-us-meds-pdmp-fhir-ig">Final Approach for US Meds PDMP FHIR IG</a></li>
      <li><a href="#security-considerations" id="markdown-toc-security-considerations">Security Considerations</a></li>
    </ul>
  </li>
  <li><a href="#pdmp-data-elements-and-mappings" id="markdown-toc-pdmp-data-elements-and-mappings">PDMP Data Elements and Mappings</a>    <ul>
      <li><a href="#pmix-mappings-for-pdmp-request" id="markdown-toc-pmix-mappings-for-pdmp-request">PMIX Mappings for PDMP Request</a></li>
      <li><a href="#pmix-mappings-for-pdmp-response" id="markdown-toc-pmix-mappings-for-pdmp-response">PMIX Mappings for PDMP Response</a></li>
      <li><a href="#fhir-profiles" id="markdown-toc-fhir-profiles">FHIR profiles</a></li>
    </ul>
  </li>
  <li><a href="#capability-statements" id="markdown-toc-capability-statements">Capability Statements</a>    <ul>
      <li><a href="#conformance-requirements-for-the-pdmp-responder" id="markdown-toc-conformance-requirements-for-the-pdmp-responder">Conformance requirements for the PDMP Responder</a>        <ul>
          <li><a href="#behavior" id="markdown-toc-behavior">Behavior</a></li>
          <li><a href="#profile-interactions" id="markdown-toc-profile-interactions">Profile Interactions:</a></li>
          <li><a href="#security" id="markdown-toc-security">Security:</a></li>
          <li><a href="#search" id="markdown-toc-search">Search:</a></li>
        </ul>
      </li>
      <li><a href="#conformance-requirements-for-the-pdmp-requestor" id="markdown-toc-conformance-requirements-for-the-pdmp-requestor">Conformance requirements for the PDMP Requestor</a>        <ul>
          <li><a href="#behavior-1" id="markdown-toc-behavior-1">Behavior</a></li>
          <li><a href="#profile-interactions-1" id="markdown-toc-profile-interactions-1">Profile Interactions:</a></li>
          <li><a href="#security-1" id="markdown-toc-security-1">Security:</a></li>
          <li><a href="#search-1" id="markdown-toc-search-1">Search:</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#patient-matching-considerations" id="markdown-toc-patient-matching-considerations">Patient Matching Considerations</a></li>
  <li><a href="#deployment-architecture" id="markdown-toc-deployment-architecture">Deployment Architecture</a>    <ul>
      <li><a href="#deployment-option-1" id="markdown-toc-deployment-option-1">Deployment Option 1:</a></li>
      <li><a href="#deployment-option-2" id="markdown-toc-deployment-option-2">Deployment Option 2:</a></li>
      <li><a href="#deployment-option-3" id="markdown-toc-deployment-option-3">Deployment Option 3:</a></li>
    </ul>
  </li>
</ul>

<!-- end TOC -->

<h3 id="introduction">Introduction</h3>

<p>In the United States, every state is deploying a Prescription Drug Monitoring Program (PDMP) which track controlled substance prescriptions within the state. Overtime, these PDMP databases start to provide rich information on provider and patient behaviors with respect to prescribing and use of controlled substances (primarily opioids). Enabling a Provider to access a Patient’s PDMP data during care delivery will help in avoiding potential drug misuse, abuse and diversion. In order to reduce opioid abuse, some states have implemented policies mandating Providers to check the state PDMP for the Patient’s controlled substance history before prescribing controlled substances. To further address opioid abuse which is a current national priority, the US Meds Prescription Drug Monitoring Program FHIR Implementation Guide (US Meds PDMP FHIR IG) outlines how systems can access PDMP data for a patient from the state PDMP systems using the HL7 FHIR standard. For general background on state PDMPs, see the Centers for Disease Control and Prevention <a href="https://www.cdc.gov/drugoverdose/pdmp/states.html">what states need to know about PDMPs</a>.</p>

<h3 id="scope">Scope</h3>

<p>This section outlines the transactions which are in-scope and not in-scope for the US Meds PDMP FHIR IG. As shown in the Figure 1 below, the PDMP eco-system can be simplified for the purpose of this project to consist of EHRs or Clinical Systems, Pharmacies and the State PDMP systems.</p>

<p>The US Meds PDMP FHIR IG defines how an EHR or an App or other Clinical Systems can access a Patient’s controlled substance prescription history from the State PDMP systems. This is identified by Interaction 3 in the diagram.
All other interactions such as Interaction 1 and 2 in the diagram below are important for the overall PDMP eco-system, they are not in-scope for this project and IG.</p>

<!-- all this Bootstrap html for getting an narrow image to fit nicely in text - 640 pix wide -->

<!-- file:///assets/images/simplified-pdmp.png -->

<div>
<figure class="figure">
<figcaption class="figure-caption"><strong>Figure 1: Simplified View of PDMP eco-system interactions.</strong></figcaption>
  <img src="assets/images/simplified-pdmp.png" class="figure-img img-responsive img-rounded center-block" alt="simplified-pdmp.png" />
</figure>

<p></p>
</div>

<h3 id="abstract-model-actors-and-definitions">Abstract Model, Actors and Definitions</h3>

<p>This section defines the abstract model which is used to identify the specific actors and interactions that are in-scope for the project. The abstract model is as shown in Figure 2 below which consists of two actors namely the PDMP Requestor and the PDMP Responder.</p>

<p><strong>PDMP Requestor</strong>: PDMP Requestor is a health IT system that is requesting a Patient’s controlled substance history. Real-world examples of such health IT systems include EHRs, SMART on FHIR Apps and other Clinical Systems used for care delivery.</p>

<p><strong>PDMP Responder</strong>: PDMP Responder is a health IT system that accepts a request from a PDMP Requestor and responds to the request with a controlled substance history for the patient. Real-world examples of such health IT systems include intermediary gateways such as Appriss, RxCheck, State HIEs and State PDMP systems.</p>

<p><strong>Note</strong>: PDMP Responders, which act as intermediaries, provide additional services such as being able to query multiple State PDMP systems for analytics which generates additional information for the Provider. The fact that a PDMP Responder is an intermediary or if it is the actual State PDMP system is transparent to the PDMP Requestor and is more of a deployment architecture.</p>

<!-- all this Bootstrap html for getting an narrow image to fit nicely in text - 640 pix wide -->

<!-- file:///assets/images/abstract-model.png -->

<div>
<figure class="figure">
<figcaption class="figure-caption"><strong>Figure 2: PDMP Abstract Model and Actors.</strong></figcaption>
  <img src="assets/images/abstract-model.png" class="figure-img img-responsive img-rounded center-block" alt="abstract-model.png" />
</figure>

<p></p>
</div>

<h3 id="pdmp-data-access-using-fhir">PDMP Data Access using FHIR</h3>

<p>The abstract model interactions can be implemented using FHIR in multiple ways namely</p>

<ul>
  <li>Using FHIR Search APIs</li>
  <li>Using FHIR Messaging APIs</li>
</ul>

<p>These APIs are discussed further in the next few sub-sections.</p>

<h4 id="using-fhir-search-apis">Using FHIR Search APIs</h4>

<p>The FHIR standard provides a rich set of <a href="http://hl7.org/fhir/search.html">search mechanisms</a> by which specific FHIR resources can be accessed from a FHIR server. Typically the search parameters are specified in the RESTful URL and accessed using the HTTP GET operation.</p>

<p>The following is an example of how search parameters will be used by a PDMP Requestor to retrieve PDMP data from a PDMP Responder.</p>

<p>‘GET [base]/MedicationDispense?subject:Patient.name.given=peter&amp;subject:Patient.name.family=jacobs&amp;subject:Patient.birthdate=eq1973-11-25&amp;authorizingPrescription.dispenseRequest.validityPeriod=ge2010-01-01&amp;authorizingPrescription.dispenseRequest.validityPeriod=le2015-12-31&amp;_include=MedicationDispense:subject&amp;_include:recurse=MedicationDispense:authorizingPrescription&amp;_include=MedicationDispense:medication’</p>

<p>The above API will fetch all MedicationDispense resources for Patient with a given name of “peter” and family name of “jacobs” with a birthdate of “1973-11-25” with a prescription that falls within in a 5 year window starting from January 1st 2010 to December 31st 2015 and as part of the returned information will include MedicationDispense, MedicationRequest, Practitioner, Organization, Patient and Medication information as part of the returned bundle.</p>

<p>Also as part of the Search API one can specify to the server to include additional information such as the prescriber information, patient information. The combinations that need to be implemented by the US Meds PDMP FHIR IG actors will be described in detail as part of the Capability Statements.</p>

<h4 id="using-fhir-messaging-apis">Using FHIR Messaging APIs</h4>

<p>The FHIR standard also provides APIs that resemble messaging paradigm similar to HL7 v2. These are part of the <a href="http://hl7.org/fhir/messaging.html">FHIR Messaging APIs</a>. A PDMP Requestor can request prescription history for a patient by invoking the <a href="http://hl7.org/fhir/messageheader-operations.html">$process-message</a> on the base URL as follows:</p>

<p><code class="highlighter-rouge">POST [base-url]/$process-message</code></p>

<p><strong>NOTE</strong>: FHIR Messaging APIs will require the use of the POST operation even to access data.</p>

<p>The body of the message will be a FHIR Bundle that contains a MessageHeader resource as the first entry with the following minimum details:</p>

<ul>
  <li>MessageHeader Resource
    <ul>
      <li>MessageHeader.id</li>
      <li>MessageHeader.event (A new event type for retrieving PDMP data needs to be added to the value-set)</li>
      <li>MessageHeader.timestamp</li>
      <li>MessageHeader.responsible containing a reference to Practitioner resource requesting the information.</li>
      <li>MessageHeader.focus containing a reference to the Patient resource for whom the prescription history is required.</li>
      <li>MessageHeader.data containing a reference to Parameters resource to specify additional parameters such as the date range.</li>
    </ul>
  </li>
  <li>Include the Practitioner and Patient Resources as entries in the bundle.</li>
  <li>Include the Parameters resource with the parameters of startDate and endDate with values for date range.</li>
</ul>

<p>The PDMP Responder has to be able to process this message and return back a Bundle which contains all the MedicationDispense resources along with Practitioner, Organization and Patient resources related to the data set. In case of errors OperationOutcome would be returned similar to any regular FHIR API.</p>

<p><strong>NOTE</strong>: FHIR Messaging operations can only be invoked on FHIR Servers which conform to the FHIR Messaging operations in their capability statements and not on regular FHIR servers implementing RESTful Search APIs.</p>

<h4 id="final-approach-for-us-meds-pdmp-fhir-ig">Final Approach for US Meds PDMP FHIR IG</h4>

<p>For the purposes of the US Meds PDMP FHIR IG, the FHIR Search APIs will be used and will be specified in detail in the CapabilityStatements for the actors. While both the Search and Messaging APIs have their own strengths and weaknesses, the decision to use FHIR Search APIs is based on the following factors</p>

<ul>
  <li>Argonaut program has embraced the FHIR Search APIs for conforming to the ONC 2015 Edition for the Common Clinical Data Set</li>
  <li>US-Core and US Meds Implementation Guides specify the search APIs as basic capabilities for FHIR servers providing access to data.</li>
  <li>Search APIs will be relatively easier to build on existing FHIR infrastructure developed by vendor community.</li>
  <li>Search APIs are limited to synchronous operations only and avoid the complexity of the various Message Exchange patterns that need to be accounted for in a Messaging system.</li>
</ul>

<h4 id="security-considerations">Security Considerations</h4>

<p>All implementers of FHIR servers and clients should pay attention to <a href="http://hl7.org/fhir/security.html">FHIR Security</a> considerations. In addition to the <a href="http://hl7.org/fhir/security.html">FHIR Security</a> considerations, the PDMP requests need to contain specific information about Requestor Identity and Requestor Facility information. Providing this information using FHIR Search APIs is very cumbersome and is not necessary. This kind of information can be collected by the PDMP Responder’s Authorization Server during application registration and avoid repeating the information on each request. These mechanisms are outlined in great detail in the <a href="http://docs.smarthealthit.org/authorization/backend-services/">SMART Backend Services Authorization Guide</a>. The US Meds PDMP FHIR IG will use the SMART Backend Services Authorization Guide to collect the necessary requestor information appropriate to making the PDMP data request. In addition the authentication and authorization mechanisms will be used as part of requesting the PDMP data using the FHIR Search APIs.</p>

<h3 id="pdmp-data-elements-and-mappings">PDMP Data Elements and Mappings</h3>

<p>This section describes and identifies data elements that are used commonly in the PDMP data requests and responses and provides mappings of these data elements to FHIR. Based on environmental scans and prior performed by ONC across a spectrum of PDMP implementations the following data was collected:</p>

<ul>
  <li>Most of the existing EHR implementations use NCPDP script 10.6 or ASAP web services to request and receive PDMP data from PDMP Responders (Intermediaries or State PDMP systems).</li>
  <li>Most of the State PDMP systems are implemented using data elements specified by the NIEM standard and expose these data elements using PMIX APIs.</li>
  <li>Most of the EHRs use intermediaries to request data from one or more State PDMP systems and send NCPDP based requests and receive responses in NCPDP format.</li>
</ul>

<p>Based on the above findings, NCPDP Request and Response data elements have been used as a starting point to specify the FHIR APIs. Since the community understands these NCPDP data elements, a mapping of NCPDP Request and Response data elements to FHIR Resources has been created and specified below. This allows organizations already familiar with NCPDP to use the mapping provided to develop their FHIR Resources and APIs. Similarly mapping from PMIX/NIEM data elements to FHIR is also provided for systems using PMIX/NIEM to map their data to FHIR and expose them through appropriate APIs.</p>

<h4 class="no_toc" id="ncpdp-mappings-for-pdmp-request">NCPDP Mappings for PDMP Request</h4>

<p>This section includes the minimal mapping for the PDMP request from an EHR to a state PDMP using NCPDP.</p>

<!-- [MedicationRequest](http://hl7.org/fhir/STU3/medicationrequest-mappings.html#script10.6): includes a full mapping for medicationRequest resource to SCRIPT 10.6 -->

<style type="text/css">.ritz .waffle a { color: inherit; }.ritz .waffle .maptable17{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable18{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#ffffff;text-align:left;color:#262626;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable12{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#4f81bd;text-align:center;font-weight:bold;color:#ffffff;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable15{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:center;font-weight:bold;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable112{background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable11{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#4f81bd;text-align:center;font-weight:bold;color:#ffffff;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable10{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#4f81bd;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable111{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:left;font-weight:bold;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable14{border-bottom:1px SOLID #000000;border-right:1px SOLID transparent;background-color:#c6d9f0;text-align:center;font-weight:bold;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable13{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable110{border-bottom:1px SOLID #000000;border-right:1px SOLID transparent;background-color:#c6d9f0;text-align:left;font-weight:bold;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable16{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable19{border-bottom:1px SOLID #000000;border-right:1px SOLID transparent;background-color:#c6d9f0;text-align:center;font-weight:bold;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable113{background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}</style>

<div class="ritz grid-container" dir="ltr">
  <table class="waffle" cellspacing="0" cellpadding="0">
    <tbody>
      <tr style="height:20px;">
        <td class="maptable10">
        </td>
        <td class="maptable11">PDMP Request Data Element</td>
        <td class="maptable11">NCPDP Data Element</td>
        <td class="maptable12">FHIR Data Element</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable13">
        </td>
        <td class="maptable14">Routing Information</td>
        <td class="maptable14">
        </td>
        <td class="maptable15">
        </td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable16" rowspan="4">Request</td>
        <td class="maptable17">Requestor</td>
        <td class="maptable17">&lt;Last Name&gt; &lt;First Name&gt;</td>
        <td class="maptable17">Practitioner.name</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">Requestor Role</td>
        <td class="maptable17">&lt;Qualifer&gt;</td>
        <td class="maptable17">PractitionerRole.code</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">Request ID</td>
        <td class="maptable17">&lt;MessageID&gt;</td>
        <td class="maptable17">MessageHeader.id</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable18">Request date/ timestamp</td>
        <td class="maptable18">&lt;SentTime&gt;</td>
        <td class="maptable17">MessageHeader.timestamp</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable16" rowspan="2">Requestor Identifier</td>
        <td class="maptable17">NPI Number*</td>
        <td class="maptable17">&lt;NPI&gt;</td>
        <td class="maptable17">Practitioner.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">DEA Number*</td>
        <td class="maptable17">&lt;DEANumber&gt;</td>
        <td class="maptable17">Practitioner.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable16" rowspan="3">Requesting Facility ID</td>
        <td class="maptable17">DEA Number*</td>
        <td class="maptable17">&lt;DEANumber&gt;</td>
        <td class="maptable17">Organization.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">NCPDP Number*</td>
        <td class="maptable17">&lt;NCPDPID&gt;</td>
        <td class="maptable17">Organization.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">NPI*</td>
        <td class="maptable17">&lt;NPI&gt;</td>
        <td class="maptable17">Organization.identifier</td>
      </tr>
      <tr style="height:28px;">
        <td class="maptable16" rowspan="3">Requesting Faciltiy</td>
        <td class="maptable17">Facility Name</td>
        <td class="maptable17">&lt;Store Name&gt; &lt;Clinic Name&gt;</td>
        <td class="maptable17">Organization.name</td>
      </tr>
      <tr style="height:28px;">
        <td class="maptable17">State code of Requesting Facility</td>
        <td class="maptable17">&lt;State&gt;</td>
        <td class="maptable17">Organization.address</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable19">Message Body</td>
        <td class="maptable110">
        </td>
        <td class="maptable111">
        </td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable16" rowspan="3">Patient</td>
        <td class="maptable17">First Name</td>
        <td class="maptable17">&lt;FirstName&gt;</td>
        <td class="maptable17">MedicationDispense.subject(Patient) --&gt; Patient.name.given</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">Last Name</td>
        <td class="maptable17">&lt;LastName&gt;</td>
        <td class="maptable17">MedicationDispense.subject(Patient) --&gt; Patient.name.family</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">Date of Birth</td>
        <td class="maptable17">&lt;DateofBirth&gt;</td>
        <td class="maptable17">MedicationDispense.subject(Patient) --&gt; Patient.birthdate</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable16" rowspan="2">Request Prescription Date Range</td>
        <td class="maptable17">Start Date</td>
        <td class="maptable17">&lt;EffectiveDate&gt;</td>
        <td class="maptable17">MedicationDispense.authorizingPrescription.dispenseRequest.validityPeriod</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">End Date</td>
        <td class="maptable17">&lt;ExpirationDate&gt;</td>
        <td class="maptable17">MedicationDispense.authorizingPrescription.dispenseRequest.validityPeriod</td>
      </tr>
      <tr style="height:40px;">
        <td class="maptable112">
        </td>
        <td class="maptable113" colspan="3">* Conditionally required data elements have asterisks (*), meaning at least one data element is required within this category. For example, under Requesting Facility ID, one of the three data elements (DEA Number, NCPDP Number or NPI) is required.</td>
      </tr>
    </tbody>
  </table>
</div>

<h4 class="no_toc" id="ncpdp-mappings-for-pdmp-response">NCPDP Mappings for PDMP Response</h4>

<p>This section includes the minimal mapping for the PDMP response from a state PDMP to an EHR using NCPDP.</p>

<style type="text/css">.ritz .waffle a { color: inherit; }.ritz .waffle .maptable215{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable22{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#4f81bd;text-align:center;font-weight:bold;color:#ffffff;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable213{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable27{border-bottom:1px SOLID transparent;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable211{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable25{border-bottom:1px SOLID #000000;border-right:1px SOLID transparent;background-color:#c6d9f0;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable21{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#4f81bd;text-align:center;font-weight:bold;color:#ffffff;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable26{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable210{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable28{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable217{background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:top;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable216{background-color:#ffffff;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable24{border-bottom:1px SOLID #000000;border-right:1px SOLID transparent;background-color:#c6d9f0;text-align:center;font-weight:bold;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable20{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#4f81bd;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable23{border-bottom:1px SOLID transparent;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable29{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable214{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable212{border-bottom:1px SOLID #000000;border-right:1px SOLID transparent;background-color:#c6d9f0;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}</style>

<div class="ritz grid-container" dir="ltr">
  <table class="waffle" cellspacing="0" cellpadding="0">
    <tbody>
      <tr style="height:19px;">
        <td class="maptable20">
        </td>
        <td class="maptable21">PDMP Response Data Element</td>
        <td class="maptable21">NCPDP Data Element</td>
        <td class="maptable22">FHIR Data Element</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable23">
        </td>
        <td class="maptable24">Routing Information</td>
        <td class="maptable25">
        </td>
        <td class="maptable26">
        </td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable27">
        </td>
        <td class="maptable28">Response Date/Timestamp</td>
        <td class="maptable29">&lt;SentTime&gt;</td>
        <td class="maptable29">MessageHeader.timestamp</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable27">
        </td>
        <td class="maptable28">Response Prescription Date Range (Start Date)</td>
        <td class="maptable29">&lt;EffectiveDate&gt;</td>
        <td class="maptable29">MessageHeader</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable23">
        </td>
        <td class="maptable28">Response Prescription Date Range (End date)</td>
        <td class="maptable29">&lt;ExpirationDate&gt;</td>
        <td class="maptable29">MessageHeader</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable23">
        </td>
        <td class="maptable28">Request ID</td>
        <td class="maptable210">&lt;RelatesToMessageID&gt;</td>
        <td class="maptable29">MessageHeader.response.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable211">
        </td>
        <td class="maptable24">Message Body</td>
        <td class="maptable212">
        </td>
        <td class="maptable213">
        </td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214" rowspan="8">Patient</td>
        <td class="maptable28">Patient First Name</td>
        <td class="maptable29">&lt;FirstName&gt;</td>
        <td class="maptable29">Patient.name.given</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Patient Last Name</td>
        <td class="maptable29">&lt;LastName&gt;</td>
        <td class="maptable29">Patient.name.family</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Patient Date of Birth</td>
        <td class="maptable29">&lt;DateOfBirth&gt;</td>
        <td class="maptable29">Patient.birthdate</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Patient Gender</td>
        <td class="maptable29">&lt;Gender&gt;</td>
        <td class="maptable29">Patient.gender</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable28">Patient Street Address</td>
        <td class="maptable215">&lt;AddressLine&gt; &lt;AddressLine2&gt;</td>
        <td class="maptable29">Patient.address.line</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Patient City Address</td>
        <td class="maptable29">&lt;City&gt;</td>
        <td class="maptable29">Patient.address.city</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Patient State Code</td>
        <td class="maptable29">&lt;State&gt;</td>
        <td class="maptable29">Patient.address.state</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Patient Zip Code</td>
        <td class="maptable29">&lt;ZipCode&gt;</td>
        <td class="maptable29">Patient.address.postalCode</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214">Patient Identifier</td>
        <td class="maptable28">SSN*</td>
        <td class="maptable29">&lt;SocialSecurity&gt;</td>
        <td class="maptable29">Patient.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214" rowspan="12">Prescription</td>
        <td class="maptable28">Prescription Filled Date</td>
        <td class="maptable29">&lt;LastFillDate&gt;</td>
        <td class="maptable29">MedicationDispense.whenPrepared</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Prescription Written Date</td>
        <td class="maptable29">&lt;WrittenDate&gt;</td>
        <td class="maptable29">MedicationDispense.authorizingPrescription.authoredOn</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Prescription Number</td>
        <td class="maptable29">&lt;SourceReference&gt;</td>
        <td class="maptable29">MedicationDispense.Identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Drug Name[1]</td>
        <td class="maptable29">&lt;DrugDescription&gt;</td>
        <td class="maptable29">MedicationDispense.medication[x]</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable28">Drug Strength[1]</td>
        <td class="maptable215">&lt;StrengthValue, Code&gt; fields </td>
        <td class="maptable29">Medication.ingredient.itemReference</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Dosage Form[2]</td>
        <td class="maptable29">&lt;FormCode&gt;</td>
        <td class="maptable29">Medication.form</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Drug Quantity</td>
        <td class="maptable29">&lt;Quantity&gt;</td>
        <td class="maptable29">MedicationDispense.quantity</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Days of Supply</td>
        <td class="maptable29">&lt;DaysSupply&gt;</td>
        <td class="maptable29">MedicationDispense.daysSupply</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Refill Number</td>
        <td class="maptable29">&lt;FillNumber&gt;</td>
        <td class="maptable29">Medication.request - extension</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Refills Authorized</td>
        <td class="maptable29">&lt;Refills&gt;</td>
        <td class="maptable29">MedicationDispense.authorizingPrescription.dispenseRequest.numberOfRepeatsAllowed</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Partial Fill Indicator </td>
        <td class="maptable29">gap</td>
        <td class="maptable29">MedicationDispense.type</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Method of Payment</td>
        <td class="maptable29">&lt;Note&gt;</td>
        <td class="maptable29">MedicationDispense.note</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214" rowspan="2">Drug</td>
        <td class="maptable28">Product ID Qualifier</td>
        <td class="maptable215">&lt;CodeListQualifier&gt;</td>
        <td class="maptable29">MedicationDipense.medicationCodeableConcept.code.system</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable28">Product ID</td>
        <td class="maptable29">&lt;ProductCode&gt;</td>
        <td class="maptable29">MedicationDispense.medicationCodeableConcept.code.value</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable214" rowspan="6">Dispenser Organization</td>
        <td class="maptable28">Dispenser Organization Name (Facility)</td>
        <td class="maptable29">&lt;StoreName&gt;</td>
        <td class="maptable29">Organization.name</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable28">Dispenser Organization Street Address</td>
        <td class="maptable215">&lt;AddressLine&gt; &lt;AddressLine2&gt;</td>
        <td class="maptable29">Organization.address.line</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Dispenser Organization City Address</td>
        <td class="maptable29">&lt;City&gt;</td>
        <td class="maptable29">Organization.address.city</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Dispenser Organization State Code</td>
        <td class="maptable29">&lt;State&gt;</td>
        <td class="maptable29">Organization.address.state</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Dispenser Organization Zip Code</td>
        <td class="maptable29">&lt;ZipCode&gt;</td>
        <td class="maptable29">Organization.address.postalCode</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Dispenser Organization Phone Number</td>
        <td class="maptable215">&lt;CommunicationNumber&gt;</td>
        <td class="maptable29">Organization.telecom</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214" rowspan="3">Dispenser Organization (Pharmacy identifier)</td>
        <td class="maptable28">DEA Number*</td>
        <td class="maptable29">&lt;DEANumber&gt;</td>
        <td class="maptable29">Organization.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">NCPDP Number*  </td>
        <td class="maptable29">&lt;NCPDPID&gt;</td>
        <td class="maptable29">Organization.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">NPI Number*</td>
        <td class="maptable29">&lt;NPI&gt;</td>
        <td class="maptable29">Organization.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214" rowspan="6">Prescriber</td>
        <td class="maptable28">Prescriber First Name</td>
        <td class="maptable29">&lt;FirstName&gt;</td>
        <td class="maptable29">Practitioner.name.given</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Prescriber Last Name</td>
        <td class="maptable29">&lt;LastName&gt;</td>
        <td class="maptable29">Practitioner.name.family</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable28">Prescriber Street Address</td>
        <td class="maptable215">&lt;AddressLine&gt; &lt;AddressLine2&gt;</td>
        <td class="maptable29">Practitioner.address.line</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Prescriber City Address</td>
        <td class="maptable29">&lt;City&gt;</td>
        <td class="maptable29">Practitioner.address.city</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Prescriber State Code</td>
        <td class="maptable29">&lt;State&gt;</td>
        <td class="maptable29">Practitioner.address.state</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Prescriber Zip Code</td>
        <td class="maptable29">&lt;ZipCode&gt;</td>
        <td class="maptable29">Practitioner.address.postalCode</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214" rowspan="4">Prescriber Identifier</td>
        <td class="maptable28">DEA Number*</td>
        <td class="maptable29">&lt;DEANumber&gt;</td>
        <td class="maptable29">Practitioner.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">NPI Number*</td>
        <td class="maptable29">&lt;NPI&gt;</td>
        <td class="maptable29">Practitioner.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">State License* Identifier</td>
        <td class="maptable29">NA</td>
        <td class="maptable29">Practitioner.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">State of License*</td>
        <td class="maptable29">NA</td>
        <td class="maptable29">Practitioner.identifier</td>
      </tr>
      <tr style="height:42px;">
        <td class="maptable216">
        </td>
        <td class="maptable217" colspan="3">* Conditionally required data elements have asterisks (*), meaning at least one data element is required within this category. For example, under Requesting Facility ID, one of the three data elements (DEA Number, NCPDP Number or NPI) is required.
        Similarly for Patient Identifier, either SSN or MedicareNumber should be used as allowed by law. Additional occurrences of Patient Identifier may use PatientAccountNumber of MedicalRecordIdentificationNumberEHR per the NCPDP Script implementation guide.</td>
      </tr>
    </tbody>
  </table>
</div>

<h4 id="pmix-mappings-for-pdmp-request">PMIX Mappings for PDMP Request</h4>

<p>This section includes the minimal mapping for the PDMP request from an EHR to a state PDMP using PMIX.</p>

<style type="text/css">.ritz .waffle a { color: inherit; }.ritz .waffle .maptable17{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable18{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#ffffff;text-align:left;color:#262626;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable12{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#4f81bd;text-align:center;font-weight:bold;color:#ffffff;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable15{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:center;font-weight:bold;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable112{background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable11{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#4f81bd;text-align:center;font-weight:bold;color:#ffffff;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable10{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#4f81bd;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable111{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:left;font-weight:bold;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable14{border-bottom:1px SOLID #000000;border-right:1px SOLID transparent;background-color:#c6d9f0;text-align:center;font-weight:bold;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable13{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable110{border-bottom:1px SOLID #000000;border-right:1px SOLID transparent;background-color:#c6d9f0;text-align:left;font-weight:bold;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable16{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable19{border-bottom:1px SOLID #000000;border-right:1px SOLID transparent;background-color:#c6d9f0;text-align:center;font-weight:bold;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable113{background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}</style>

<div class="ritz grid-container" dir="ltr">
  <table class="waffle" cellspacing="0" cellpadding="0">
    <tbody>
      <tr style="height:20px;">
        <td class="maptable10">
        </td>
        <td class="maptable11">PDMP Request Data Element</td>
        <td class="maptable11">PMIX Data Element</td>
        <td class="maptable12">FHIR Data Element</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable13">
        </td>
        <td class="maptable14">Routing Information</td>
        <td class="maptable14">
        </td>
        <td class="maptable15">
        </td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable16" rowspan="4">Request</td>
        <td class="maptable17">Requestor</td>
        <td class="maptable17">&lt;pmix:Requestor&gt;</td>
        <td class="maptable17">Practitioner.name</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">Requestor Role</td>
        <td class="maptable17">&lt;pmix:RequestorRole&gt;</td>
        <td class="maptable17">PractitionerRole.code</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">Request ID</td>
        <td class="maptable17">&lt;pmix:RequestID&gt;</td>
        <td class="maptable17">MessageHeader.id</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable18">Request date/ timestamp</td>
        <td class="maptable18">n/a</td>
        <td class="maptable17">MessageHeader.timestamp</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable16" rowspan="2">Requestor Identifier</td>
        <td class="maptable17">NPI Number*</td>
        <td class="maptable17">&lt;nc:IdentificationID&gt;</td>
        <td class="maptable17">Practitioner.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">DEA Number*</td>
        <td class="maptable17">&lt;nc:IdentificationID&gt;</td>
        <td class="maptable17">Practitioner.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable16" rowspan="3">Requesting Facility ID</td>
        <td class="maptable17">DEA Number*</td>
        <td class="maptable17">&lt;nc:IdentificationID&gt;</td>
        <td class="maptable17">Organization.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">NCPDP Number*</td>
        <td class="maptable17">&lt;nc:IdentificationID&gt;</td>
        <td class="maptable17">Organization.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">NPI*</td>
        <td class="maptable17">&lt;nc:IdentificationID&gt;</td>
        <td class="maptable17">Organization.identifier</td>
      </tr>
      <tr style="height:28px;">
        <td class="maptable16" rowspan="3">Requesting Faciltiy</td>
        <td class="maptable17">Facility Name</td>
        <td class="maptable17">&lt;nc:OrganizationDoingBusinessAsName&gt;</td>
        <td class="maptable17">Organization.name</td>
      </tr>
      <tr style="height:28px;">
        <td class="maptable17">State code of Requesting Facility</td>
        <td class="maptable17">&lt;nc:LocationStateUSPostalServiceCode&gt;</td>
        <td class="maptable17">Organization.address</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable19">Message Body</td>
        <td class="maptable110">
        </td>
        <td class="maptable111">
        </td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable16" rowspan="3">Patient</td>
        <td class="maptable17">First Name</td>
        <td class="maptable17">&lt;nc:PersonGivenName&gt;</td>
        <td class="maptable17">MedicationDispense.subject(Patient) --&gt; Patient.name.given</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">Last Name</td>
        <td class="maptable17">&lt;nc:PersonSurName&gt;</td>
        <td class="maptable17">MedicationDispense.subject(Patient) --&gt; Patient.name.family</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">Date of Birth</td>
        <td class="maptable17">&lt;nc:Date&gt;</td>
        <td class="maptable17">MedicationDispense.subject(Patient) --&gt; Patient.birthdate</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable16" rowspan="2">Request Prescription Date Range</td>
        <td class="maptable17">Start Date</td>
        <td class="maptable17">&lt;pmp:RequestPrescriptionDateRangeBegin&gt;</td>
        <td class="maptable17">MedicationDispense.authorizingPrescription.dispenseRequest.validityPeriod</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable17">End Date</td>
        <td class="maptable17">&lt;pmp:RequestPrescriptionDateRangeEnd&gt;</td>
        <td class="maptable17">MedicationDispense.authorizingPrescription.dispenseRequest.validityPeriod</td>
      </tr>
      <tr style="height:40px;">
        <td class="maptable112">
        </td>
        <td class="maptable113" colspan="3">* Conditionally required data elements have asterisks (*), meaning at least one data element is required within this category. For example, under Requesting Facility ID, one of the three data elements (DEA Number, NCPDP Number or NPI) is required.</td>
      </tr>
    </tbody>
  </table>
</div>

<h4 id="pmix-mappings-for-pdmp-response">PMIX Mappings for PDMP Response</h4>

<p>This section includes the minimal mapping for the PDMP response from a state PDMP to an EHR using PMIX.</p>

<style type="text/css">.ritz .waffle a { color: inherit; }.ritz .waffle .maptable215{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable22{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#4f81bd;text-align:center;font-weight:bold;color:#ffffff;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable213{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable27{border-bottom:1px SOLID transparent;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable211{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable25{border-bottom:1px SOLID #000000;border-right:1px SOLID transparent;background-color:#c6d9f0;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable21{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#4f81bd;text-align:center;font-weight:bold;color:#ffffff;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable26{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable210{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable28{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable217{background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:top;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable216{background-color:#ffffff;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable24{border-bottom:1px SOLID #000000;border-right:1px SOLID transparent;background-color:#c6d9f0;text-align:center;font-weight:bold;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:bottom;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable20{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#4f81bd;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable23{border-bottom:1px SOLID transparent;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable29{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#ffffff;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable214{border-bottom:1px SOLID #000000;border-right:1px SOLID #000000;background-color:#c6d9f0;text-align:center;color:#000000;font-family:'Calibri',Arial;font-size:12pt;vertical-align:middle;white-space:normal;overflow:hidden;word-wrap:break-word;direction:ltr;padding:0px 3px 0px 3px;}.ritz .waffle .maptable212{border-bottom:1px SOLID #000000;border-right:1px SOLID transparent;background-color:#c6d9f0;text-align:left;color:#000000;font-family:'Calibri',Arial;font-size:11pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:0px 3px 0px 3px;}</style>

<div class="ritz grid-container" dir="ltr">
  <table class="waffle" cellspacing="0" cellpadding="0">
    <tbody>
      <tr style="height:19px;">
        <td class="maptable20">
        </td>
        <td class="maptable21">PDMP Response Data Element</td>
        <td class="maptable21">PMIX Data Element</td>
        <td class="maptable22">FHIR Data Element</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable23">
        </td>
        <td class="maptable24">Routing Information</td>
        <td class="maptable25">
        </td>
        <td class="maptable26">
        </td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable27">
        </td>
        <td class="maptable28">Response Date/Timestamp</td>
        <td class="maptable29">&lt;pmp:ReportExecutionDate&gt;&lt;pmp:ReportExecutionTime&gt;</td>
        <td class="maptable29">MessageHeader.timestamp</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable27">
        </td>
        <td class="maptable28">Response Prescription Date Range (Start Date)</td>
        <td class="maptable29">&lt;pmp:ReportDateRangeBegin&gt;</td>
        <td class="maptable29">MessageHeader</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable23">
        </td>
        <td class="maptable28">Response Prescription Date Range (End date)</td>
        <td class="maptable29">&lt;pmp:ReportDateRangeEnd&gt;</td>
        <td class="maptable29">MessageHeader</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable23">
        </td>
        <td class="maptable28">Request ID</td>
        <td class="maptable210">n/a</td>
        <td class="maptable29">MessageHeader.response.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable211">
        </td>
        <td class="maptable24">Message Body</td>
        <td class="maptable212">
        </td>
        <td class="maptable213">
        </td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214" rowspan="8">Patient</td>
        <td class="maptable28">Patient First Name</td>
        <td class="maptable29">&lt;nc:PersonGivenName&gt;</td>
        <td class="maptable29">Patient.name.given</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Patient Last Name</td>
        <td class="maptable29">&lt;nc:PersonSurName&gt;</td>
        <td class="maptable29">Patient.name.family</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Patient Date of Birth</td>
        <td class="maptable29">&lt;nc:Date&gt;</td>
        <td class="maptable29">Patient.birthdate</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Patient Gender</td>
        <td class="maptable29">&lt;PersonSexCode&gt;</td>
        <td class="maptable29">Patient.gender</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable28">Patient Street Address</td>
        <td class="maptable215">&lt;StreetFullText&gt;</td>
        <td class="maptable29">Patient.address.line</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Patient City Address</td>
        <td class="maptable29">&lt;nc:LocationCityName&gt;</td>
        <td class="maptable29">Patient.address.city</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Patient State Code</td>
        <td class="maptable29">&lt;nc:LocationStateUSPostalServiceCode&gt;</td>
        <td class="maptable29">Patient.address.state</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Patient Zip Code</td>
        <td class="maptable29">&lt;nc:LocationPostalExtensionCod&gt;</td>
        <td class="maptable29">Patient.address.postalCode</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214">Patient Identifier</td>
        <td class="maptable28">SSN*</td>
        <td class="maptable29">&lt;nc:IdentificationID&gt;</td>
        <td class="maptable29">Patient.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214" rowspan="12">Prescription</td>
        <td class="maptable28">Prescription Filled Date</td>
        <td class="maptable29">&lt;pmp:ReportDateRangeBegin&gt;&lt;pmp:ReportDateRangeEnd&gt;</td>
        <td class="maptable29">MedicationDispense.whenPrepared</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Prescription Written Date</td>
        <td class="maptable29">&lt;nc:Date&gt;</td>
        <td class="maptable29">MedicationDispense.authorizingPrescription.authoredOn</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Prescription Number</td>
        <td class="maptable29">&lt;pmp:PrescriptionNumberText&gt;</td>
        <td class="maptable29">MedicationDispense.Identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Drug Name[1]</td>
        <td class="maptable29">&lt;pmp:DrugProductNameText&gt;</td>
        <td class="maptable29">MedicationDispense.medication[x]</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable28">Drug Strength[1]</td>
        <td class="maptable215">&lt;pmp:DrugStrengthText&gt;</td>
        <td class="maptable29">Medication.ingredient.itemReference</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Dosage Form[2]</td>
        <td class="maptable29">&lt;pmp:DrugUnitOfMeasureText&gt;</td>
        <td class="maptable29">Medication.form</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Drug Quantity</td>
        <td class="maptable29">&lt;pmp:DispensedQuantity&gt;</td>
        <td class="maptable29">MedicationDispense.quantity </td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Days of Supply</td>
        <td class="maptable29">&lt;pmp:DaysSupplyCount&gt;</td>
        <td class="maptable29">MedicationDispense.daysSupply</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Refill Number</td>
        <td class="maptable29">&lt;pmp:DrugRefillNumberCount&gt;</td>
        <td class="maptable29">Medication.request - extension</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Refills Authorized</td>
        <td class="maptable29">&lt;pmp:RefillsAuthorizedCount&gt;</td>
        <td class="maptable29">MedicationDispense.authorizingPrescription.dispenseRequest.numberOfRepeatsAllowed</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Partial Fill Indicator </td>
        <td class="maptable29">&lt;pmp:PartialFillIndicator&gt;</td>
        <td class="maptable29">MedicationDispense.type</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Method of Payment</td>
        <td class="maptable29">&lt;pmp:MethodOfPaymentCode&gt;</td>
        <td class="maptable29">MedicationDispense.note</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214" rowspan="2">Drug</td>
        <td class="maptable28">Product ID Qualifier</td>
        <td class="maptable215">&lt;pmp:DrugCPDProductIdentifier&gt;&lt;pmp:DrugDINProductIdentifier&gt;&lt;/br&gt;&lt;pmp:DrugHRIProductIdentifier&gt;&lt;pmp:pmp:DrugNDCProductIdentifier&gt;&lt;/br&gt;&lt;pmp:DrugUPCProductIdentifie&gt;&lt;pmp:DrugUPNProductIdentifier&gt;</td>
        <td class="maptable29">MedicationDispense.medicationCodeableConcept.code.system</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable28">Product ID</td>
        <td class="maptable29">&lt;IdentificationID&gt;</td>
        <td class="maptable29">MedicationDispense.medicationCodeableConcept.code.value</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable214" rowspan="6">Dispenser Organization</td>
        <td class="maptable28">Dispenser Organization Name (Facility)</td>
        <td class="maptable29">&lt;nc:OrganizationDoingBusinessAsName&gt;</td>
        <td class="maptable29">Organization.name</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable28">Dispenser Organization Street Address</td>
        <td class="maptable215">&lt;nc:StreetFullText&gt;</td>
        <td class="maptable29">Organization.address.line</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Dispenser Organization City Address</td>
        <td class="maptable29">&lt;nc:LocationCityName&gt;</td>
        <td class="maptable29">Organization.address.city</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Dispenser Organization State Code</td>
        <td class="maptable29">&lt;nc:LocationStateUSPostalServiceCode&gt;</td>
        <td class="maptable29">Organization.address.state</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Dispenser Organization Zip Code</td>
        <td class="maptable29">&lt;nc:LocationPostalCode&gt;</td>
        <td class="maptable29">Organization.address.postalCode</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Dispenser Organization Phone Number</td>
        <td class="maptable215">&lt;nc:TelephoneNumberFullID&gt;</td>
        <td class="maptable29">Organization.telecom</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214" rowspan="3">Dispenser Organization (Pharmacy identifier)</td>
        <td class="maptable28">DEA Number*</td>
        <td class="maptable29">&lt;nc:IdentificationIDgt;</td>
        <td class="maptable29">Organization.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">NCPDP Number*  </td>
        <td class="maptable29">&lt;nc:IdentificationID&gt;</td>
        <td class="maptable29">Organization.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">NPI Number*</td>
        <td class="maptable29">&lt;nc:IdentificationID&gt;</td>
        <td class="maptable29">Organization.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214" rowspan="6">Prescriber</td>
        <td class="maptable28">Prescriber First Name</td>
        <td class="maptable29">&lt;nc:PersonGivenName&gt;</td>
        <td class="maptable29">Practitioner.name.given</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Prescriber Last Name</td>
        <td class="maptable29">&lt;nc:PersonSurName&gt;</td>
        <td class="maptable29">Practitioner.name.family</td>
      </tr>
      <tr style="height:32px;">
        <td class="maptable28">Prescriber Street Address</td>
        <td class="maptable215">&lt;nc:StreetFullText&gt;</td>
        <td class="maptable29">Practitioner.address.line</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Prescriber City Address</td>
        <td class="maptable29">&lt;nc:LocationCityName&gt;</td>
        <td class="maptable29">Practitioner.address.city</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Prescriber State Code</td>
        <td class="maptable29">&lt;nc:LocationStateUSPostalServiceCode&gt;</td>
        <td class="maptable29">Practitioner.address.state</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">Prescriber Zip Code</td>
        <td class="maptable29">&lt;LocationPostalCode&gt;</td>
        <td class="maptable29">Practitioner.address.postalCode</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable214" rowspan="4">Prescriber Identifier</td>
        <td class="maptable28">DEA Number*</td>
        <td class="maptable29">&lt;IdentificationID&gt;</td>
        <td class="maptable29">Practitioner.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">NPI Number*</td>
        <td class="maptable29">&lt;IdentificationID&gt;</td>
        <td class="maptable29">Practitioner.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">State License* Identifier</td>
        <td class="maptable29">IdentificationID</td>
        <td class="maptable29">Practitioner.identifier</td>
      </tr>
      <tr style="height:20px;">
        <td class="maptable28">State of License*</td>
        <td class="maptable29">IdentificationID</td>
        <td class="maptable29">Practitioner.identifier</td>
      </tr>
      <tr style="height:42px;">
        <td class="maptable216">
        </td>
        <td class="maptable217" colspan="3">* Conditionally required data elements have asterisks (*), meaning at least one data element is required within this category. For example, under Requesting Facility ID, one of the three data elements (DEA Number, NCPDP Number or NPI) is required.
        Similarly for Patient Identifier, either SSN or MedicareNumber should be used as allowed by law. Additional occurrences of Patient Identifier may use PatientAccountNumber of MedicalRecordIdentificationNumberEHR per the NCPDP Script implementation guide.</td>
      </tr>
    </tbody>
  </table>
</div>

<h4 id="fhir-profiles">FHIR profiles</h4>

<p>This project does not create any new profiles, but will reuse the US-Core profiles and the US Meds profiles to request and receive PDMP data using FHIR resources.</p>

<h3 id="capability-statements">Capability Statements</h3>

<p>This section identifies the CapabilityStatements defined for this implementation guide. The section outlines conformance requirements for each of the US Meds PDMP FHIR IG actors which includes the specific profiles, operations, security mechanisms and search parameters that need to be supported.</p>

<p><strong>Note</strong>: The individual profiles identify the structural constraints, terminology bindings and invariants.</p>

<h4 id="conformance-requirements-for-the-pdmp-responder">Conformance requirements for the PDMP Responder</h4>

<p>The section describes the expected capabilities of the PDMP Responder actor which is responsible for providing responses to the queries submitted by the PDMP Requestor applications.</p>

<h5 id="behavior">Behavior</h5>

<p>The PDMP Responder <strong>SHALL</strong>:</p>

<ul>
  <li>Support the US Core Patient, US Core Practitioner, US Core Organization resource profiles.</li>
  <li>Support the US Meds MedicationRequest and MedicationDispense Profile.</li>
  <li>Implement the RESTful behavior according to the <a href="https://www.hl7.org/fhir/http.html">FHIR specification</a>.
    <ul>
      <li>which includes returning the following response classes:
        <ul>
          <li>(Status 200): successful operation</li>
          <li>(Status 400): invalid parameter</li>
          <li>(Status 401/4xx): unauthorized request</li>
          <li>(Status 403): insufficient scope</li>
          <li>(Status 404): unknown resource</li>
          <li>(Status 410): deleted resource.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Support json resource formats for all PDMP interactions.</li>
  <li>Declare a CapabilityStatement identifying the list of profiles, operations, and search parameters supported.</li>
</ul>

<p>The PDMP Responder <strong>SHOULD</strong>:</p>

<ul>
  <li>Support the following US Core and US Meds resource profiles:
    <ul>
      <li>US Core Medication</li>
      <li>US Meds MedicationAdministration</li>
    </ul>
  </li>
  <li>Support xml resource formats for all US Meds interactions.</li>
  <li>Identify the US Core profile(s) and US Meds profiles supported as part of the FHIR meta.profile attribute for each instance.</li>
</ul>

<p>The PDMP Responder MAY:</p>

<ul>
  <li>Support other US Core and US Meds resource profile</li>
</ul>

<h5 id="profile-interactions">Profile Interactions:</h5>

<ul>
  <li>
    <p>The PDMP Responder <strong>SHALL</strong> support the FHIR Search interaction for MedicationDispense profile.</p>
  </li>
  <li>
    <p>The PDMP Responder <strong>SHOULD</strong> support the FHIR Read profile interaction MedicationDispense profile.</p>
  </li>
  <li>
    <p>The PDMP Responder <strong>MAY</strong> support other FHIR profile interactions.</p>
  </li>
</ul>

<h5 id="security">Security:</h5>

<ul>
  <li>
    <p>The PDMP Responder <strong>SHALL</strong> support the SMART Backend Services Authorization Guide for verifying authentication and providing authorization to PDMP Requestors.</p>
  </li>
  <li>
    <p>The PDMP Responder <strong>SHALL</strong> support the HTTP Header parameter X-Request-ID for request coorelation between the PDMP Requester and PDMP Responder.</p>
  </li>
</ul>

<h5 id="search">Search:</h5>

<p>The PDMP Responder <strong>SHALL</strong> support the following search parameters and combination for the MedicationDispense resource</p>

<ul>
  <li>Chained Search parameters
    <ul>
      <li>subject:Patient.name.given - Patient’s first name</li>
      <li>subject:Patient.name.family - Patient’s family name</li>
      <li>subject:Patient.birthdate - Patient’s birth date</li>
      <li>authorizingPrescription.dispenseRequest.validityPeriod - To specify the date range for the PDMP data retrieval</li>
    </ul>
  </li>
</ul>

<p>The PDMP Responder <strong>SHALL</strong> support the following _include parameters for the MedicationDispense Search operations</p>

<ul>
  <li>_include=MedicationDispense:subject - Returns the Patient Resource information</li>
  <li>_include:recurse=MedicationDispense:authorizingPrescription - Returns the MedicationRequest, Practitioner Resource information and Organization information</li>
  <li>_include=MedicationDispense:medication - Returns the Medication Resource information</li>
</ul>

<p>The following is an example of the query.</p>

<p><code class="highlighter-rouge">GET [base]/MedicationDispense?subject:Patient.name.given=peter&amp;subject:Patient.name.family=jacobs&amp;subject:Patient.birthdate=eq1973-11-25&amp;authorizingPrescription.dispenseRequest.validityPeriod=ge2010-01-01&amp;authorizingPrescription.dispenseRequest.validityPeriod=le2015-12-31&amp;_include=MedicationDispense:subject&amp;_include:recurse=MedicationDispense:authorizingPrescription&amp;_include=MedicationDispense:medication</code></p>

<p>The above API will fetch all MedicationDispense resources for Patient with a given name of “peter” and family name of “jacobs” with a birthdate of “1973-11-25” with a prescription that falls within in a 5 year window starting from January 1st 2010 to December 31st 2015 and as part of the returned information will include MedicationDispense, MedicationRequest, Practitioner, Organization, Patient and Medication information as part of the returned bundle.</p>

<p>All other information required to authenticate and authorize a PDMP Requestor is captured as part of registering the PDMP Requestor following the SMART Backend Services Authorization Guide.</p>

<h4 id="conformance-requirements-for-the-pdmp-requestor">Conformance requirements for the PDMP Requestor</h4>

<p>The section describes the expected capabilities of the PDMP Requestor actor which is responsible for providing responses to the queries submitted by the PDMP Requestor applications.</p>

<h5 id="behavior-1">Behavior</h5>

<p>The PDMP Requestor <strong>SHALL</strong>:</p>

<ul>
  <li>Support the US Core Patient, US Core Practitioner, US Core Organization resource profiles.</li>
  <li>Support the US Meds MedicationRequest and MedicationDispense Profile.</li>
  <li>Consume the RESTful responses according to the FHIR specification.
    <ul>
      <li>which includes returning the following response classes:
        <ul>
          <li>(Status 200): successful operation</li>
          <li>(Status 400): invalid parameter</li>
          <li>(Status 401/4xx): unauthorized request</li>
          <li>(Status 403): insufficient scope</li>
          <li>(Status 404): unknown resource</li>
          <li>(Status 410): deleted resource.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Support json resource formats for all PDMP interactions.</li>
</ul>

<p>The PDMP Requestor <strong>SHOULD</strong>:</p>

<ul>
  <li>Support the following US Core and US Meds resource profiles:
    <ul>
      <li>US Core Medication</li>
      <li>US Meds MedicationAdministration</li>
    </ul>
  </li>
  <li>Support xml resource formats for all PDMP interactions.</li>
</ul>

<h5 id="profile-interactions-1">Profile Interactions:</h5>

<ul>
  <li>
    <p>The PDMP Requestor <strong>SHALL</strong> support the FHIR Search interaction for MedicationDispense profile.</p>
  </li>
  <li>
    <p>The PDMP Requestor <strong>SHOULD</strong> support the FHIR Read profile interaction for MedicationDispense profile.</p>
  </li>
  <li>
    <p>The PDMP Requestor <strong>MAY</strong> support other FHIR profile interactions.</p>
  </li>
</ul>

<h5 id="security-1">Security:</h5>

<ul>
  <li>
    <p>The PDMP Requestor <strong>SHALL</strong> support the SMART Backend Services Authorization Guide applicable to clients.</p>
  </li>
  <li>
    <p>The PDMP Requestor <strong>SHALL</strong> add the HTTP Header parameter X-Request-ID as part of the Search request for request coorelation between the PDMP Requester and PDMP Responder.</p>
  </li>
</ul>

<h5 id="search-1">Search:</h5>

<p>The PDMP Requestor <strong>SHALL</strong> invoke the Search operation on the PDMP Responder including the following search and _include parameters when requesting PDMP data using the MedicationDispense resource</p>

<ul>
  <li>Chained Search parameters
    <ul>
      <li>subject:Patient.name.given - Patient’s first name</li>
      <li>subject:Patient.name.family - Patient’s family name</li>
      <li>subject:Patient.birthdate - Patient’s birth date</li>
      <li>authorizingPrescription.dispenseRequest.validityPeriod - To specify the date range for the PDMP data retrieval</li>
    </ul>
  </li>
</ul>

<p>The PDMP Requestor <strong>SHALL</strong> include the following _include parameters for the MedicationDispense Search operations</p>

<ul>
  <li>_include=MedicationDispense:subject - Returns the Patient Resource information</li>
  <li>_include:recurse=MedicationDispense:authorizingPrescription - Returns the MedicationRequest, Practitioner Resource information and Organization information</li>
  <li>_include=MedicationDispense:medication - Returns the Medication Resource information</li>
</ul>

<p>The following is an example of the query.</p>

<p><code class="highlighter-rouge">GET [base]/MedicationDispense?subject:Patient.name.given=peter&amp;subject:Patient.name.family=jacobs&amp;subject:Patient.birthdate=eq1973-11-25&amp;authorizingPrescription.dispenseRequest.validityPeriod=ge2010-01-01&amp;authorizingPrescription.dispenseRequest.validityPeriod=le2015-12-31&amp;_include=MedicationDispense:subject&amp;_include:recurse=MedicationDispense:authorizingPrescription&amp;_include=MedicationDispense:medication</code></p>

<p>The above API will fetch all MedicationDispense resources for Patient with a given name of “peter” and family name of “jacobs” with a birthdate of “1973-11-25” with a prescription that falls within in a 5 year window starting from January 1st 2010 to December 31st 2015 and as part of the returned information will include MedicationDispense, MedicationRequest, Practitioner, Organization, Patient and Medication information as part of the returned bundle.</p>

<h3 id="patient-matching-considerations">Patient Matching Considerations</h3>

<p>The US Meds PDMP FHIR IG does not add any patient matching requirements to the PDMP actors, but relies on existing practices used for patient matching based on the first name, last name and date of birth provided through the request. Some states may require requesters to include additional parameters to facilitate more accurate patient matching results, however these variations are out of scope for this IG.</p>

<h3 id="deployment-architecture">Deployment Architecture</h3>

<p>The following are deployment options showing how the US Meds PDMP FHIR IG can be used to implement the various actors.</p>

<h4 id="deployment-option-1">Deployment Option 1:</h4>

<p>In this deployment option, the EHRs, Apps and Clinical Systems act as the PDMP Requestors and interact with Intermediary Gateways such as Appriss, RxCheck which act as the PDMP Responders. The communication is performed using FHIR APIs. In this case the PDMP Requestors are isolated from the State PDMP Systems and the protocols they support.</p>

<p>The Intermediaries may translate the incoming FHIR request for data to a PMIX/NIEM request to comply with existing state interfaces or may use other methods to get the data from the State PDMP systems. All of these interactions are isolated from the PDMP Requestor. The Intermediaries may also retrieve data from multiple State PDMP systems simultaneously.</p>

<!-- all this Bootstrap html for getting an narrow image to fit nicely in text - 640 pix wide -->

<!-- file:///assets/images/dep-option-1.png -->

<div>
<figure class="figure">
<figcaption class="figure-caption"><strong>Figure 3: Deployment Option using Intermediaries and PMIX/NIEM.</strong></figcaption>
  <img src="assets/images/dep-option-1.png" class="figure-img img-responsive img-rounded center-block" alt="dep-option-1.png" />
</figure>

<p></p>
</div>

<h4 id="deployment-option-2">Deployment Option 2:</h4>

<p>In this deployment option, the EHRs, Apps and Clinical Systems act as the PDMP Requestors and interact with Intermediary Gateways such as Appriss, RxCheck which act as the PDMP Responders. The communication is performed using FHIR APIs. In this case the PDMP Requestors are isolated from the State PDMP Systems and the protocols they support.</p>

<p>The Intermediaries in this case will use FHIR APIs to request data from one or more State PDMP Systems. The advantage here it is the same standard end to end however an Intermediary can provide value added information such as analytics, ability to integrate data from multiple states.</p>

<p>The Intermediary plays the role of PDMP Responder for Transactions 1 and 2 but plays the role of PDMP Requestor for Transactions 1a and 1b where the State PDMP Systems play the PDMP Responder role.</p>

<!-- all this Bootstrap html for getting an narrow image to fit nicely in text - 640 pix wide -->

<!-- file:///assets/images/dep-option-2.png -->

<div>
<figure class="figure">
<figcaption class="figure-caption"><strong>Figure 4: Deployment Option using Intermediaries and only FHIR.</strong></figcaption>
  <img src="assets/images/dep-option-2.png" class="figure-img img-responsive img-rounded center-block" alt="dep-option-2.png" />
</figure>

<p></p>
</div>

<h4 id="deployment-option-3">Deployment Option 3:</h4>

<p>In this deployment option, the EHRs, Apps and Clinical Systems act as the PDMP Requestors and interact with the State PDMP Systems which act as the PDMP Responders using the FHIR APIs</p>

<p>There are no intermediaries being used in this deployment and State PDMP Systems have to support the necessary FHIR APIs and SMART Backend Authorization protocols.</p>

<!-- all this Bootstrap html for getting an narrow image to fit nicely in text - 640 pix wide -->

<!-- file:///assets/images/dep-option-3.png -->

<div>
<figure class="figure">
<figcaption class="figure-caption"><strong>Figure 5: Deployment Option using FHIR and no Intermediaries.</strong></figcaption>
  <img src="assets/images/dep-option-3.png" class="figure-img img-responsive img-rounded center-block" alt="dep-option-3.png" />
</figure>

<p></p>
</div>



  <!-- ==============END CONTENT END CONTENT=================== -->

</div>  <!-- col -->
</div>  <!-- /inner-wrapper -->
</div>  <!-- /row -->
</div>  <!-- /container -->
</div>  <!-- /page content -->
</div>  <!-- /page content wrapper -->



</div>

    </div>  <!-- /inner-wrapper -->
            </div>  <!-- /row -->
        </div>  <!-- /container -->

    </div>  <!-- /segment-content -->

<!-- back to top arrow -->

<a id="back-to-top" href="#" class="btn btn-info btn-lg back-to-top" role="button" title="Click to return on the top page" data-toggle="tooltip" data-placement="left"><span class="glyphicon glyphicon-chevron-up"></span></a>


<!-- end back to top arrow -->

<div id="segment-footer" class="segment"  igtool="footer">  <!-- segment-footer -->
  <div class="container">  <!-- container -->
   <div class="inner-wrapper">
    <p>
      US Meds 
           Version: 1.1.0
         &reg;&copy;   <a style="color: #81BEF7" href="http://hl7.org/fhir/STU3/index.html">FHIR Version: 3.0.1</a> generated on Mon, Feb 4, 2019 17:32-0800.
      | <a style="color: #81BEF7" href="http://www.hl7.org/fhir/us/meds/history.cfml">History</a>
      | <a style="color: #81BEF7" href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemAdd&amp;tracker_id=677">Propose a change</a>
        <a style="color: #81BEF7" rel="license" href="http://hl7.org/fhir/STU3/license.html"><img style="border-style: none;" alt="CC0" src="cc0.png"/></a>
        </p>
   </div>  <!-- /inner-wrapper -->
  </div>  <!-- /container -->
 </div>  <!-- /segment-footer -->
  <!-- disqus thread -->
  <!-- disqus -->
  <!-- end disqus -->

 <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
  <div class="container">  <!-- container -->
  </div>  <!-- /container -->
 </div>  <!-- /segment-post-footer -->

 <!-- JS and analytics only. -->
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="./assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
<script src="./assets/js/bootstrap.min.js"> </script>
<script src="./assets/js/respond.min.js"> </script>
<script src="./assets/js/anchor.min.js"> </script>
<script src="./assets/js/fhir.js"> </script>
<script src="./assets/js/clipboard.min.js"> </script>


<script src="./assets/js/topofpage.js"> </script>





<!-- Analytics Below
================================================== -->

<!-- add anchors before the closing body tag. and copyto clipboard button functionality-->
<script>
anchors.add()
new Clipboard('#copy-button');
</script>



</body>
</html>

